"use strict";function _classCallCheck(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,r){for(var o=0;o<r.length;o++){var t=r[o];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}function _createClass(e,r,o){return r&&_defineProperties(e.prototype,r),o&&_defineProperties(e,o),e}var Register=function(){function e(){_classCallCheck(this,e),this.phoneEvent(),this.emailEvent(),this.signEvent(),this.arr=[!1,!1,!1,!1]}return _createClass(e,[{key:"phoneEvent",value:function(){this.addPhone(),$(".reg_phone").css("background","#E5F2FF"),$(".reg_phone").on("click",function(){$(this).css("background","#E5F2FF"),$(".reg_email").css("background",""),$(".reg").show(),$(".reg1").hide()});var r=this;$("#getCode").on("click",function(){$(".codelook").css("display","block");var e=r.randomCode();$(".codelook").text(e),$(".codelook").css("color",r.randomColor()),$("#code").on("blur",function(){$(this).val()==$(".codelook").text()?($(".codelook").next().text("正确"),r.arr[1]=!0,$(".psw").on("blur",function(){$(this).val()?/^\d{5,10}$/.test($(this).val())?($(this).next().text("正确"),r.arr[2]=!0):(alert("密码格式不正确"),r.arr[2]=!1):alert("请输入密码")})):(alert("验证码不正确"),r.arr[1]=!1)})}),$(".sure").on("blur",function(){var e;$(this).val()?(e=$(".psw").val(),$(this).val()==e?($(this).next().text("正确"),r.arr[3]=!0):(alert("与密码不符"),r.arr[3]=!1)):alert("请输入确认密码")})}},{key:"addPhone",value:function(){var o=this;$("#phone").on("blur",function(){var e=$(this).val();if(e){/^1\d{10}$/.test(e)?($(this).next().text("正确"),o.arr[0]=!0):(alert("手机号格式不正确"),o.arr[0]=!1);var r=$.cookie("registers")?JSON.parse($.cookie("registers")):{};if(r){if(e in r)return alert("手机号已存在！"),void(o.arr[0]=!1);o.arr[0]=!0}}else alert("请输入手机号")})}},{key:"emailEvent",value:function(){this.addEmail(),$(".reg_email").on("click",function(){$(this).css("background","#E5F2FF"),$(".reg_phone").css("background",""),$(".reg1").show(),$(".reg").hide()});var r=this;$("#getCode2").on("click",function(){$(".codelook2").css("display","block");var e=r.randomCode();$(".codelook2").text(e),$(".codelook2").css("color",r.randomColor()),$("#code2").on("blur",function(){$(this).val()==$(".codelook2").text()?($(".codelook2").next().text("正确"),r.arr[1]=!0,$(".psw2").on("blur",function(){$(this).val()?/^\d{5,10}$/.test($(this).val())?($(this).next().text("正确"),r.arr[2]=!0):(alert("密码格式不正确"),r.arr[2]=!1):alert("请输入密码")})):(alert("验证码不正确"),r.arr[1]=!1)})}),$(".sure2").on("blur",function(){var e;$(this).val()?(e=$(".psw2").val(),$(this).val()==e?($(this).next().text("正确"),r.arr[3]=!0):(alert("与密码不符"),r.arr[3]=!1)):alert("请输入确认密码")})}},{key:"addEmail",value:function(){var o=this;$("#email").on("blur",function(){var e=$(this).val();if(e){/^.+[126]|[163]|[qq].+[\.com]|[\.cn]$/.test(e)?($(this).next().text("正确"),o.arr[0]=!0):(alert("邮箱格式不正确"),o.arr[0]=!1);var r=$.cookie("registers")?JSON.parse($.cookie("registers")):{};if(r){if(console.log(r),e in r)return alert("邮箱已存在！"),void(o.arr[0]=!1);o.arr[0]=!0}}else alert("请输入邮箱")})}},{key:"randomCode",value:function(){for(var e="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",r="",o=0;o<6;o++){r+=e[parseInt(Math.random()*e.length)]}return r}},{key:"randomColor",value:function(){for(var e="#",r="0123456789ABCDEFabcdef",o=0;o<6;o++){e+=r[parseInt(Math.random()*r.length)]}return e}},{key:"signEvent",value:function(){var t=this;$("#sign").on("click",function(){var e,r,o;console.log(t.arr),-1===t.arr.indexOf(!1)&&(e=$("#phone").val(),r=$(".psw").val(),(o=$.cookie("registers")?JSON.parse($.cookie("registers")):{})[e]=r,console.log(o),$.cookie("registers",JSON.stringify(o),{expires:7,path:"/"}),alert("登录成功！"),location.href="./login.html")}),$("#reg").on("click",function(){var e,r,o;console.log(t.arr),-1===t.arr.indexOf(!1)&&(e=$("#email").val(),console.log(e),r=$(".psw2").val(),(o=$.cookie("registers")?JSON.parse($.cookie("registers")):{})[e]=r,console.log(o),$.cookie("registers",JSON.stringify(o),{expires:7,path:"/"}),alert("登录成功！"),location.href="./login.html")})}}]),e}();