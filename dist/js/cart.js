"use strict";function _classCallCheck(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,n){for(var e=0;e<n.length;e++){var a=n[e];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function _createClass(t,n,e){return n&&_defineProperties(t.prototype,n),e&&_defineProperties(t,e),t}var Cart=function(){function t(){_classCallCheck(this,t),this.addEvent(),this.changeEvent(),this.clickEvent(),this.checkEvent(),this.productEvent()}return _createClass(t,[{key:"addEvent",value:function(){var t=window.localStorage;if(0==t.length)$(".cart-con-none").css("display","block");else{$(".cart-con-none").css("display","none");for(var n=0;n<t.length;n++){var e=t.key(n),a=t.getItem(e),c=JSON.parse(a),i='\n                <div class="content" data-item-id="product_'.concat(c.id,'">\n                    <ul>\n                        <input type="checkbox" class="chk">\n                        <img src="../img/cart/pro.png" alt="">\n                        <li>\n                            <b class="title">').concat(c.name,"</b>\n                            <strong>&yen;").concat(c.price,'</strong>\n                            <span class="pro-num">\n                                <b class="minus">-</b>\n                                <input type="text" value="').concat(c.num,'" class="num">\n                                <b class="add">+</b>\n                            </span>\n                            <em class="sum">￥').concat(c.price*c.num,'</em>\n                            <span class="del">删除</span>\n                        </li>\n                    </ul>\n                </div>\n                ');document.write(i)}}}},{key:"changeEvent",value:function(){var c=/(\d+)/;$(".add").on("click",function(){var t=window.localStorage,n=$(this).parent().parent().parent().parent().attr("data-item-id"),e=JSON.parse(t[n]);e.num++,t[n]=JSON.stringify(e),$(this).prev().val(e.num);var a=$(this).parent().prev().html(),a=parseInt(c.exec(a)[1]);a*=e.num,$(this).parent().next().text("￥"+a)}),$(".minus").on("click",function(){var t=window.localStorage,n=$(this).parent().parent().parent().parent().attr("data-item-id"),e=JSON.parse(t[n]);1<e.num&&e.num--,t[n]=JSON.stringify(e),$(this).next().val(e.num);var a=$(this).parent().prev().html(),a=parseInt(c.exec(a)[1]);a*=e.num,$(this).parent().next().text("￥"+a)}),$(".num").blur(function(){var t=window.localStorage,n=$(this).parent().parent().parent().parent().attr("data-item-id"),e=JSON.parse(t[n]);e.num=$(this).val(),t[n]=JSON.stringify(e),$(this).val(e.num);var a=$(this).parent().prev().html(),a=parseInt(c.exec(a)[1]);a*=e.num,$(this).parent().next().text("￥"+a)})}},{key:"clickEvent",value:function(){$(".del").on("click",function(){var t=window.localStorage;console.log(t),delete t[$(this).parent().parent().parent().attr("data-item-id")],$(this).parent().parent().parent().remove(),0==t.length&&($(".cart-con-none").css("display","block"),$(".content").css("display","none"))})}},{key:"checkEvent",value:function(){$(".all_big").on("click",function(){var c,i,o,r;$("input[type='checkbox']").prop("checked")?(console.log($("input[type='checkbox']").prop("checked")),$(".chk").prop("checked","checked"),c=window.localStorage,i=$(this).parent().next().children(".content"),console.log(i),o=0,$.each(i,function(t,n){var e=JSON.parse(c[$(n).attr("data-item-id")]),a=e.num*e.price;o+=a,r=i.length}),console.log(o),$(".all_sum").text("￥"+o+".00"),$(".all_num").text(r)):(console.log($("input[type='checkbox']").prop("checked")),$(".chk").removeProp("checked"),$(".all_sum").text("￥0.00"),$(".all_num").text("0"))}),$(".Gobuy").on("click",function(){location.href="https://auth.alipay.com/login/index.htm"})}},{key:"productEvent",value:function(){$(".go").click(function(){location.href="./product.html"})}}]),t}(),CartBottom=function(){function t(){_classCallCheck(this,t),this.checkEvent()}return _createClass(t,[{key:"checkEvent",value:function(){$(".Gobuy").on("click",function(){location.href="https://auth.alipay.com/login/index.htm"})}}]),t}();