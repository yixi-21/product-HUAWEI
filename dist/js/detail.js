"use strict";function _classCallCheck(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(n,t){for(var a=0;a<t.length;a++){var e=t[a];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(n,e.key,e)}}function _createClass(n,t,a){return t&&_defineProperties(n.prototype,t),a&&_defineProperties(n,a),n}var id=window.location.search.slice(4);$.ajax({type:"POST",url:"../php/detail.php",success:function(n){n=JSON.parse(n),$.each(n,function(n,t){var a;t.id==id&&(a='\n            <ul class="detail-top-left">\n                <li class="min">\n                    <img src='.concat(t.url_big,' alt="">\n                    <strong class="mask"><img src=').concat(t.url_big,' alt=""></strong>\n                    <strong class="min_i"></strong>\n                </li>\n                <li class="small">\n                    <i class="iconfont icon-arrow-left s_left"></i>\n                    <span id="imgCon">\n                        <img src=').concat(t.url_small.one,' alt="">\n                        <img src=').concat(t.url_small.two,' alt="">\n                        <img src=').concat(t.url_small.three,' alt="">\n                        <img src=').concat(t.url_small.four,' alt="">\n                        <img src=').concat(t.url_small.five,' alt="">\n                        <img src=').concat(t.url_small.sex,' alt="">\n                        <img src=').concat(t.url_small.seven,' alt="">\n                        <img src=').concat(t.url_small.eight,' alt="">\n                    </span>\n                    <i class="iconfont icon-jiantou s_right"></i>\n                </li>\n            </ul>\n            <ul class="detail-top-right">\n                <li>\n                    <h4 class="title">').concat(t.title,'</h4> \n                    <a href="javascript:;">【新品首销】①赠华为耳机②赠华为云服务礼包③晒单限量赠精美礼品|老用户加赠延保，点击参与>>></a>\n                    <em>6.8英寸超清大屏；22.5W超级快充；6400W高清摄影；极速5G新体验；颜值实力派；全系128G大存储；</em>\n                    <p class="price">\n                        <span><label>价格</label><strong>&yen;').concat(t.price,'</strong></span>\n                        <span>\n                            <label>促销</label>\n                            <em>\n                                <strong>赠品</strong>\n                                <strong>去选择></strong>\n                            </em>\n                            <em>\n                                <strong>一站式换新</strong>\n                                <strong>APP专享，最高补贴530元</strong>\n                            </em>\n                            <em>\n                                <strong>商品赠券</strong>\n                                <strong>支付后赠送精美礼券</strong>\n                            </em>\n                            <em>\n                                <strong>赠送积分</strong>\n                                <strong>购买即赠商城积分，积分可抵现~</strong>\n                            </em>\n                        </span>\n                    </p>\n                    <p class="ser">\n                        <em>\n                            <label>服务说明</label>\n                            <span>\n                                预计付款5天内发货\n                                <i class="iconfont icon-wenhao"></i>\n                            </span>\n                            <span>\n                                <b>\n                                    <i class="iconfont icon-duigou"></i>\n                                    <strong>已满48元已免运费</strong>\n                                </b>\n                                <b>\n                                    <i class="iconfont icon-duigou"></i>\n                                    <strong>已满48元已免运费</strong>\n                                </b>\n                            </span>\n                        </em>\n                        <em>\n                            <label>商品编码</label>\n                            <b>2601010226605</b>\n                        </em>\n                    </p>\n                    <p class="select">\n                        <em>\n                            <label>选择颜色</label>\n                            <a href="javascript:;"><img src="../img/magnify/ss.png" alt=""><b>').concat(t.select.first,'</b></a>\n                            <a href="javascript:;"><img src="../img/magnify/ss2.png" alt=""><b>').concat(t.select.second,'</b></a>\n                            <a href="javascript:;"><img src="../img/magnify/ss3.png" alt=""><b>').concat(t.select.third,'</b></a>\n                        </em>\n                        <em>\n                            <label>选择版本</label>\n                            <a href="javascript:;">').concat(t.selected.first,'</a>\n                            <a href="javascript:;">').concat(t.selected.second,'</a>\n                        </em>\n                        <em>\n                            <label>选择套餐</label>\n                            <a href="javascript:;">官方标配</a>\n                        </em>\n                        <em>\n                            <label>保障服务</label>\n                            <a href="javascript:;">碎屏服务保1年 &yen; 103.2</a>\n                            <a href="javascript:;">延长服务保1年 &yen; 94.4</a>\n                        </em>\n                    </p>\n                    <p class="selected">\n                        <em>  \n                            <label>已选择商品：</label>\n                            <span>樱雪晴空 / 5GB全网通 8GB+128GB / 官网标配</span>\n                        </em>\n                        <em>\n                            <span class="pro-num">\n                                <b id="minus">-</b>\n                                <input type="text" value="1" class="num">\n                                <b id="add">+</b>\n                            </span>\n                            <span class="cart">加入购物车</span>\n                            <span class="buy">立即下单</span>\n                        </em>\n                    </p>\n                </li>\n            </ul> '),$("#detail").html(a))}),$(".min").on("mouseenter",function(){$(this).on("mousemove",function(n){var t=n.pageX-$(this).offset().left,a=n.pageY-$(this).offset().top,e=t-$(".min_i").width()/2,s=a-$(".min_i").height()/2,c=$(".min").width()-$(".min_i").width(),l=$(".min").height()-$(".min_i").height();e<0?e=0:c<e&&(e=c),s<0?s=0:l<s&&(s=l),$(".min_i").css({left:e,top:s});var i=s/l,o=e/c*($(".mask").width()-$(".mask img").width()),r=i*($(".mask").height()-$(".mask img").height());$(".mask img").css({left:o,top:r})}),$(".min_i").show(),$(".mask").show()}),$(".min").on("mouseleave",function(){$(".min_i").hide(),$(".mask").hide()});var t=0;$(".s_left").click(function(){--t<-1&&(t=-1),$("#imgCon").css("left",35*-t+"px")}),$(".s_right").click(function(){6<++t&&(t=6),$("#imgCon").css("left",35*-t+"px")}),$("#imgCon img").each(function(n,t){$(t).mouseenter(function(){var n=$(this).attr("src");$(".min img").attr("src",n)})}),$("#add").click(function(){var n=$(".num").val();n++,$(".num").val(n)}),$("#minus").click(function(){var n=$(".num").val();--n<=1&&(n=1),$(".num").val(n)}),$(".num").blur(function(){$(".num").val()<=1&&$(".num").val(1)}),$(".cart").click(function(){var n=id,t=$(".title").text(),a=$(".price").children().first().html(),a=/(\d+)/.exec(a)[1],e=$(".num").val();console.log(n,t,a,e);var s=window.localStorage,c='{"id" : '.concat(n,',"name" : "').concat(t,'","price" : ').concat(a,',"num" : ').concat(e,"}");s.setItem("product_".concat(n),c),$(".Tocart").first().text("购物车("+e+")").css("color","red"),$(".hungBar-wrap i a").css("display","block").text(e),console.log($(".Tocart").first().html())}),$(".Tocart").click(function(){location.href="./cart.html"}),$(".hungBar-wrap .to").click(function(){location.href="./cart.html"})}});var HungBar=function(){function n(){_classCallCheck(this,n),this.addEvent(),this.bool=!1}return _createClass(n,[{key:"addEvent",value:function(){window.onscroll=function(){document.documentElement.scrollTop>document.documentElement.clientHeight?($(".hungBar-wrap .top").css("display","block"),console.log(document.documentElement.clientHeight+100)):$(".hungBar-wrap .top").css("display","none")};var n=this;$(".hungBar-wrap .top").on("click",function(){n.bool=!0,setInterval(function(){n.bool&&(document.documentElement.scrollTop-=100,0===document.documentElement.scrollTop&&(n.bool=!1))},16)})}}]),n}();